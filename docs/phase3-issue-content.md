# Blueprint Analyzer Agent Skill - Phase 3: Advanced Performance Analysis

## æ¦‚è¦
Blueprint Analyzer Agent Skillã®Phase 3å®Ÿè£…: é«˜åº¦ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ

## å‰ææ¡ä»¶
- Phase 1ï¼ˆåŸºæœ¬å®Ÿè£…ï¼‰ãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ï¼ˆIssue #68ã§å®Ÿè£…æ¸ˆã¿ï¼‰
- Phase 2ï¼ˆUnreal Python APIçµ±åˆï¼‰ãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨
- æ—¢å­˜ã®åˆ†ææ©Ÿèƒ½ã‚’æ‹¡å¼µã™ã‚‹å½¢ã§å®Ÿè£…

## ä¸»ãªæ©Ÿèƒ½

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- [ ] Tické–¢æ•°ã®ä½¿ç”¨çŠ¶æ³æ¤œå‡º
  - EventTickã®ä½¿ç”¨ç®‡æ‰€
  - é »ç¹ã«å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ã®ç‰¹å®š
  - ã‚¿ã‚¤ãƒãƒ¼ä½¿ç”¨ã®æ¨å¥¨ææ¡ˆ
- [ ] é‡ã„å‡¦ç†ã®æ¤œå‡º
  - ForEachãƒ«ãƒ¼ãƒ—ã®ä½¿ç”¨çŠ¶æ³
  - é…åˆ—æ“ä½œã®æœ€é©åŒ–ãƒã‚§ãƒƒã‚¯
  - æ–‡å­—åˆ—æ“ä½œã®é »åº¦åˆ†æ
- [ ] Castä½¿ç”¨ã®æœ€é©åŒ–ãƒã‚§ãƒƒã‚¯
  - Castãƒãƒ¼ãƒ‰ã®ä½¿ç”¨é »åº¦
  - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ä½¿ç”¨æ¨å¥¨
  - ä¸è¦ãªCastã®æ¤œå‡º
- [ ] ConstructionScriptåˆ†æ
  - é‡ã„å‡¦ç†ã®è­¦å‘Š
  - ã‚¨ãƒ‡ã‚£ã‚¿ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿è©•ä¾¡

### ãƒ¡ãƒ¢ãƒªä½¿ç”¨åˆ†æ
- [ ] é…åˆ—ã¨ãƒãƒƒãƒ—ã®ä½¿ç”¨çŠ¶æ³
- [ ] ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§ã®ç®¡ç†
- [ ] å¤§ããªã‚¢ã‚»ãƒƒãƒˆå‚ç…§ã®æ¤œå‡º
- [ ] ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯å¯èƒ½æ€§ã®æ¤œå‡º

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãƒã‚§ãƒƒã‚¯
- [ ] Event Dispatcherä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- [ ] BlueprintCallableãªé–¢æ•°ã®è¨­è¨ˆ
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å……å®Ÿåº¦
- [ ] ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã®æ¤œå‡º
- [ ] å‘½åè¦å‰‡ã®ä¸€è²«æ€§

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
- [ ] Blueprintéšå±¤å›³ï¼ˆMermaidå½¢å¼ï¼‰
  - ã‚¯ãƒ©ã‚¹ç¶™æ‰¿é–¢ä¿‚
  - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®Ÿè£…
  - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ
- [ ] ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—
  - ã‚¢ã‚»ãƒƒãƒˆé–“ã®å‚ç…§é–¢ä¿‚
  - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®çµåˆåº¦
- [ ] æ”¹å–„ææ¡ˆãƒ¬ãƒãƒ¼ãƒˆ
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„æ¡ˆ
  - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ¨å¥¨
  - å„ªå…ˆåº¦ä»˜ãã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
- [ ] API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
  - Publicé–¢æ•°ä¸€è¦§
  - ã‚¤ãƒ™ãƒ³ãƒˆã¨ãƒ‡ãƒªã‚²ãƒ¼ãƒˆ
  - å¤‰æ•°ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

## æŠ€è¡“çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å®šç¾©
```python
# è¤‡é›‘åº¦ã‚¹ã‚³ã‚¢è¨ˆç®—ä¾‹
def calculate_complexity_score(blueprint):
    score = 0
    score += count_tick_events(blueprint) * 10  # Tickä½¿ç”¨ã¯é«˜ã‚³ã‚¹ãƒˆ
    score += count_foreach_loops(blueprint) * 5
    score += count_casts(blueprint) * 2
    score += count_string_operations(blueprint) * 3
    return score

# é–¾å€¤ã«åŸºã¥ãè­¦å‘Š
if score > 100:
    warn("High complexity - consider optimization")
```

### åˆ†æãƒ«ãƒ¼ãƒ«ã®è¨­å®š
- `Config/BlueprintAnalyzer.ini`ã§é–¾å€¤ã¨ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šå¯èƒ½
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å®šç¾©
- è­¦å‘Šãƒ¬ãƒ™ãƒ«ï¼ˆInfo, Warning, Criticalï¼‰ã®è¨­å®š

## ä½¿ç”¨ä¾‹

```bash
# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
./scripts/analyze-blueprints.sh --performance

# å®Œå…¨ãªåˆ†æã¨ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
./scripts/analyze-blueprints.sh --full-analysis --output report.md

# ç‰¹å®šã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ã¿
./scripts/analyze-blueprints.sh --performance --metrics tick,cast,loops

# CI/CDã§ã®ä½¿ç”¨ï¼ˆé–¾å€¤è¶…éã§å¤±æ•—ï¼‰
./scripts/analyze-blueprints.sh --performance --fail-on-critical
```

## æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ
```markdown
## Performance Analysis Report

### Critical Issues
- âŒ BP_CombatCharacter: EventTick with expensive operations (Score: 150)
- âŒ BP_Enemy: 15 Cast operations detected - consider interfaces

### Warnings
- âš ï¸ BP_GameMode: ForEach loop in frequently called function
- âš ï¸ BP_LifeBar: String concatenation in Tick event

### Recommendations
1. Replace EventTick with Timer in BP_CombatCharacter
2. Implement ICombatInterface instead of casting in BP_Enemy
3. Cache string operations in BP_LifeBar
```

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
```mermaid
classDiagram
    class BP_BaseCharacter {
        +MaxHP: float
        +CurrentHP: float
        +ApplyDamage(float)
        +OnDeath()
    }
    class BP_CombatCharacter {
        +AttackPower: float
        +DoAttack()
        +DoMove(Vector2D)
    }
    class ICombatAttacker {
        <<interface>>
        +PerformAttack()
    }

    BP_BaseCharacter <|-- BP_CombatCharacter
    ICombatAttacker <|.. BP_CombatCharacter
```

### æ”¹å–„ææ¡ˆãƒ¬ãƒãƒ¼ãƒˆ
- å„ªå…ˆåº¦ä»˜ãã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
- ã‚³ãƒ¼ãƒ‰ä¾‹ã¨æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- æœŸå¾…ã•ã‚Œã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„åŠ¹æœ

## å®Ÿè£…æ–¹é‡

### ãƒ•ã‚§ãƒ¼ã‚ºåˆ†ã‘
1. **åŸºæœ¬ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯**: Tickã€Castã€ãƒ«ãƒ¼ãƒ—æ¤œå‡º
2. **è©³ç´°ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: ãƒ¡ãƒ¢ãƒªã€è¤‡é›‘åº¦åˆ†æ
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ**: Mermaidå›³ã€ãƒ¬ãƒãƒ¼ãƒˆ
4. **CI/CDçµ±åˆ**: è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã¨å“è³ªã‚²ãƒ¼ãƒˆ

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¾‹
```ini
[Performance]
MaxTickUsage=5
MaxCastPerBlueprint=10
MaxLoopDepth=3
WarnOnConstructionScriptComplexity=true

[Documentation]
GenerateMermaid=true
IncludePrivateFunctions=false
OutputFormat=markdown
```

## æŠ€è¡“è¦ä»¶
- Phase 2ã®Unreal Python APIçµ±åˆãŒå®Œäº†
- Blueprintå†…éƒ¨ãƒãƒ¼ãƒ‰ã¸ã®è©³ç´°ã‚¢ã‚¯ã‚»ã‚¹
- ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆç®—ã¨ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
- Mermaidå›³ç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª

## å‚è€ƒè³‡æ–™
- [Blueprint Best Practices](https://docs.unrealengine.com/5.7/blueprint-best-practices-in-unreal-engine/)
- [Blueprint Performance](https://docs.unrealengine.com/5.7/blueprint-technical-guide/)
- [Optimization Guidelines](https://docs.unrealengine.com/5.7/performance-and-profiling-in-unreal-engine/)

## é–¢é€£Issue
- #68 - Blueprint Analyzer Agent Skill (Phase 1å®Œäº†)
- Phase 2ã®Issueç•ªå·ï¼ˆPhase 2 Issueä½œæˆå¾Œã«ãƒªãƒ³ã‚¯ï¼‰

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
